(e=>{switch(e.hostname){case"localhost":return;default:"https:"!==e.protocol&&(e.href=`https://${e.host}${e.pathname}${e.search}`)}})(window.location),window.localizedRoutes=["illustrations","character-design","animals","black-and-white","contact"],(e=>{if(!e.search)return;let t;try{t=Object.fromEntries(e.search.slice(1).split("&").map(e=>e.split("=")))}catch(t){e.href=`${e.protocol}//${e.host}${e.pathname}?page=illustrations`}if(t.page&&window.localizedRoutes.includes(t.page))return;t.page={highlights:"illustrations"}[t.page]||"illustrations";let s=Object.entries(t).map(([e,t])=>t?`${e}=${t}`:"").join("&");e.href=`${e.protocol}//${e.host}${e.pathname}${s?`?${s}`:""}`})(window.location);class Aggregate{constructor(e){this.nodes=[...e]}click(e){this.nodes.forEach(t=>{t.addEventListener("click",()=>{e(t)})})}addClass(e){this.nodes.forEach(t=>{t.classList.add(e)})}removeClass(e){this.nodes.forEach(t=>{t.classList.remove(e)})}toggleClass(e){this.nodes.forEach(t=>{t.classList.contains(e)?t.classList.remove(e):t.classList.add(e)})}}function selectTab(e){$$("nav li").removeClass("active"),$$(`nav li[name=${e}]`).addClass("active");let t=document.querySelector(`nav li[name=${e}]`).innerText.trim();document.title=`McKenzie Rose Studio | ${t}`}function conditionalRender(e,t,s="main"){const a=SITE.cache[t]||renderImages(e[t],t);return SITE.cache[t]=a,onlyChild(document.querySelector(s),a)}function conditionalStaticPageRender(e){SITE.cache[e]?document.querySelector("main").innerHTML=SITE.cache[e]:SITE.fetchTEXT(`${SITE.paths.html}${e}.html`).then(t=>(SITE.cache[e]=t,t)).then(renderStaticPage)}function render(e){let t=getPage();switch(selectTab(t),t){case"contact":case"character-design":conditionalStaticPageRender(t);break;default:conditionalRender(e,t)}gtag&&gtag("config","UA-136826563-1",{page_title:t,page_path:location.pathname+location.search})}function getPage(){return SITE.nav.getActivePage()}function renderStaticPage(e){document.querySelector("main").innerHTML=e}function renderImages(e,t){return make("div",{className:"masonry",children:e.map(e=>make("image-thumbnail",{type:t,image:e,className:"brick"}))})}window.$$=(e=>new Aggregate(document.querySelectorAll(e))),(e=>{if(e.SITE)return;let t={fetchJSON:(...t)=>(console.log("FETCHING JSON DATA"),e.fetch(...t).then(e=>e.json())),fetchTEXT:(...t)=>(console.log("FETCHING HTML",t),e.fetch(...t).then(e=>e.text())),paths:{images:"./assets/images/",html:"./assets/html/"},nav:{}};t.nav.getActivePage=(()=>{if(e.location.search)return new URL(e.location.href).searchParams.get("page");t.nav.goto("illustrations",!0)}),t.nav.goto=((s,a=!1)=>{s&&(a&&(e.location="/?page="+s),t.nav.routes.includes(s)?(e.history.pushState({page:s},s,"/?page="+s),render(e.SITE.assets)):t.nav.externalRoutes[s]?(e.open(t.nav.externalRoutes[s]),gtag&&gtag("config","UA-136826563-1",{page_title:s,page_path:`/:goto:/${s}`})):(gtag&&gtag("config","UA-136826563-1",{page_title:"UNKNOWN_PAGE:"+s,page_path:`/:goto:/${s}`}),t.nav.goto("illustrations")))}),t.nav.routes=e.localizedRoutes,t.nav.externalRoutes={etsy:"https://www.etsy.com/shop/McKenzieRoseDesign",instagram:"https://www.instagram.com/mckenzierose_studio/"},e.addEventListener("popstate",t=>{t.state.page&&render(e.SITE.assets)}),t.cache={},t.clearCache=(()=>{t.cache={}}),t.trackMediaClick=(e=>{let t=e.name;gtag&&gtag("config","UA-136826563-1",{page_title:t,page_path:`/:goto:/${t}?via=contact`})}),e.SITE=t,e.make=((e,{children:t=[],...s}={},a={})=>{let n=document.createElement(e);return Object.assign(n,s),t instanceof Array?t.forEach(e=>n.appendChild(e)):t instanceof Node?n.appendChild(t):n.innerText=t,Object.entries(a).forEach(([e,t])=>n.setAttribute(e,t)),n}),e.onlyChild=((e,t)=>{for(;e.firstChild;)e.removeChild(e.firstChild);return e.appendChild(t),e})})(window),(e=>{const t=e=>e.replace(/-/g," ").split(" ").map(e=>e[0].toUpperCase()+e.substr(1)).join(" "),{SITE:s,make:a}=e;class n extends HTMLElement{connectedCallback(){this.style.display="block",this.childConstructed=!1,this.render()}render(){const{image:n,type:i}=this;if(n&&i&&this.children&&!this.children.length){const[c]=n.split("."),o=`${t(e.getPage())}: ${t(c)}`,r=`${s.assets.meta.minPaths[i]}/${n}`;this.appendChild(a("img",{alt:o,src:r},{tabindex:0})),this.childConstructed=!0}return this.bindListeners(),this}bindListeners(){[...this.querySelectorAll("img")].forEach(e=>{e.onclick=(()=>document.querySelector("image-carousel").show(e))})}}"customElements"in e?customElements.define("image-thumbnail",n):document.registerElement("image-thumbnail",{prototype:Object.create(n.prototype)})})(window),(e=>{const{SITE:t,make:s}=e;class a extends HTMLElement{connectedCallback(){this.style.display="none",this.isOpen=!1,this.listeners=[],this.showCased=s("img"),this.appendChild(s("div",{className:"scrim",children:s("div",{className:"image-wrapper",children:this.showCased})})),this.appendChild(s("button",{className:"exit",children:"X",onclick:()=>this.close()})),this.appendChild(s("button",{className:"next",children:">",onclick:()=>this.next()})),this.appendChild(s("button",{className:"prev",children:"<",onclick:()=>this.prev()})),this.bindListeners()}open(){e.innerWidth>=540&&(this.isOpen=!0,this.style.display="block")}close(){this.isOpen=!1,this.style.display="none"}show({alt:e,src:t}){this.showCased.src=t,this.showCased.alt=e,this.open()}get pageImages(){return[...document.querySelectorAll("image-thumbnail img")]}prev(){const e=this.pageImages,t=e.findIndex(({src:e})=>e.endsWith(this.showCased.src))-1,s=e[t]||e[e.length-1];this.show(s)}next(){const e=this.pageImages,t=e.findIndex(({src:e})=>e.endsWith(this.showCased.src))+1,s=e[t]||e[0];this.show(s)}bindListeners(){this.listeners.push([document.body,"keyup",({key:e})=>{if(this.isOpen)switch(e){case"Escape":this.close();break;case"ArrowRight":case"ArrowDown":this.next();break;case"ArrowLeft":case"ArrowUp":this.prev()}}]),this.listeners.forEach(([e,t,s])=>e.addEventListener(t,s))}disconnectedCallback(){this.listeners.forEach(([e,t,s])=>e.removeEventListener(t,s))}}"customElements"in e?customElements.define("image-carousel",a):document.registerElement("image-carousel",{prototype:Object.create(a.prototype)})})(window);